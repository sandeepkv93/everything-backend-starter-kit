openapi: 3.0.3
info:
  title: Go OAuth RBAC Service API
  version: 1.0.0
servers:
  - url: http://localhost:8080/api/v1
paths:
  /auth/google/login:
    get:
      summary: Start Google OAuth login
      responses:
        '302':
          description: Redirects to Google OAuth
  /auth/google/callback:
    get:
      summary: Google OAuth callback
      parameters:
        - in: query
          name: code
          required: true
          schema:
            type: string
        - in: query
          name: state
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Login success
  /auth/refresh:
    post:
      summary: Rotate refresh token and issue new access token
      responses:
        '200':
          description: Token refresh success
  /auth/logout:
    post:
      summary: Revoke user sessions
      responses:
        '200':
          description: Logout success
  /me:
    get:
      summary: Get current user profile
      responses:
        '200':
          description: Profile response
  /admin/users:
    get:
      summary: List users
      responses:
        '200':
          description: Users
  /admin/users/{id}/roles:
    patch:
      summary: Set roles for a user
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Role update result
  /admin/roles:
    get:
      summary: List roles
      responses:
        '200':
          description: Roles
    post:
      summary: Create role
      responses:
        '201':
          description: Role created
  /admin/permissions:
    get:
      summary: List permissions
      responses:
        '200':
          description: Permissions
